<!--<div class="map" id="map"></div>-->
<aol-map id="map" [width]="'100%'" [height]="'100%'"  (onClick)="mapOnClick($event)" #map>

    <aol-view [maxZoom]="16" [minZoom]="2" [zoom]="zoom" >
        <aol-coordinate [x]="long" [y]="lat" [srid]="'EPSG:4326'"></aol-coordinate>
    </aol-view>
    <aol-layer-tile>
        <aol-source-osm></aol-source-osm>
    </aol-layer-tile>
    <aol-interaction-default>

    </aol-interaction-default>
    <aol-control-defaults></aol-control-defaults>
    <aol-layer-vector>
        <aol-source-vector>
            <aol-feature *ngIf="visible && evt.affected_area">
                <aol-geometry-polygon>
                    <aol-collection-coordinates 
                            [coordinates]="evt.affected_area['coordinates'][0][0]"
                            [srid]="'EPSG:4326'"
                    >
                    </aol-collection-coordinates>
                </aol-geometry-polygon>
                <aol-style>
                    <aol-style-stroke [color]="'red'"></aol-style-stroke>
                    <aol-style-fill [color]="[255,0,0,0.5]"></aol-style-fill>
                </aol-style>
            </aol-feature>
        </aol-source-vector>
    </aol-layer-vector>
    <aol-layer-vector>
        <aol-source-vector>
            <aol-feature *ngFor="let event of events" [id]="event.id" >
                <aol-geometry-point>
                    <aol-coordinate [x]="event.event_lon" [y]="event.event_lat" [srid]="'EPSG:4326'"></aol-coordinate>
                </aol-geometry-point>
                <aol-style [ngSwitch]='event.event_type'>
                    <aol-style-icon *ngSwitchCase="'Flood'"
                            [src]="'assets/flood.png'"
                            [anchor]="[0.5, 0.5]"
                            [anchorXUnits]="'fraction'" [anchorYUnits]="'fraction'"
                            [scale]="1"
                            [anchorOrigin]="'top-left'">
                    </aol-style-icon>
                    <aol-style-icon *ngSwitchDefault
                            [src]="'assets/fire.png'"
                            [anchor]="[0.5, 0.5]"
                            [anchorXUnits]="'fraction'" [anchorYUnits]="'fraction'"
                            [scale]="1"
                            [anchorOrigin]="'top-left'">
                    </aol-style-icon>
                </aol-style>

            </aol-feature>
        </aol-source-vector>
    </aol-layer-vector>

</aol-map>
