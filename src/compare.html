<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8' />
  <title></title>
  <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
  <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.js'></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.44.0/mapbox-gl.css' rel='stylesheet' />
  <style>
    body {
      margin: 0;
      padding: 0;
    }

    #map {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 100%;
    }
  </style>
</head>

<body>

  <style>
    body {
      overflow: hidden;
    }

    body * {
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    .map {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 100%;
    }
  </style>
  <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-compare/v0.1.0/mapbox-gl-compare.js'></script>
  <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-compare/v0.1.0/mapbox-gl-compare.css'
    type='text/css' />

  <div id='before' class='map'></div>
  <div id='after' class='map'></div>

  <script>
    mapboxgl.accessToken = 'pk.eyJ1IjoibmVzLWVvcyIsImEiOiJjamNsdXlseTYwa3V2Mndyd21idnlpdjk4In0.9QXNqnsrkr39c69CWlVsXQ';

    var beforeTileset = '{before map ID}';
    var afterTileset = '{after map ID}';

    var beforeMap = new mapboxgl.Map({
      container: 'before',
      style: {
        version: 8,
        sources: {
          'raster-tiles': {
            type: 'raster',
            tiles: [
              'http://a.render.eosda.com/S2/11/S/LU/2017/11/30/0/B04,B03,B02/{z}/{x}/{y}',
              // 'http://b.render.eosda.com/L8/LC08_L1TP_041036_20171218_20171224_01_T1/B4,B3,B2/{z}/{x}/{y}',
              // 'http://c.render.eosda.com/L8/LC08_L1TP_041036_20171218_20171224_01_T1/B4,B3,B2/{z}/{x}/{y}',
              // 'http://d.render.eosda.com/L8/LC08_L1TP_041036_20171218_20171224_01_T1/B4,B3,B2/{z}/{x}/{y}',

            ],

            tileSize: 256
          }
        },
        layers: [{
          id: 'simple-tiles',
          type: 'raster',
          source: 'raster-tiles',
          minzoom: 0,
          maxzoom: 22
        }]
      },
      center: [-118.26377, 34.61074],
      zoom: 11
    });

    var afterMap = new mapboxgl.Map({
      container: 'after',
      style: {
        version: 8,
        sources: {
          'raster-tiles': {
            type: 'raster',
            tiles: [
              'http://a.render.eosda.com/L8/LC08_L1TP_041036_20171202_20171207_01_T1/B4,B3,B2/{z}/{x}/{y}',
              // 'http://b.render.eosda.com/L8/LC08_L1TP_041036_20171202_20171207_01_T1/ISTACK/{z}/{x}/{y}',
              // 'http://c.render.eosda.com/L8/LC08_L1TP_041036_20171202_20171207_01_T1/ISTACK/{z}/{x}/{y}',
              // 'http://d.render.eosda.com/L8/LC08_L1TP_041036_20171202_20171207_01_T1/ISTACK/{z}/{x}/{y}',
              // 'http://b.render.eosda.com/L8/LC08_L1TP_041036_20171202_20171207_01_T1/B4,B3,B2/{z}/{x}/{y}',
              // 'http://c.render.eosda.com/L8/LC08_L1TP_041036_20171202_20171207_01_T1/B4,B3,B2/{z}/{x}/{y}',
              // 'http://d.render.eosda.com/L8/LC08_L1TP_041036_20171202_20171207_01_T1/B4,B3,B2/{z}/{x}/{y}'
              
              ],

            tileSize: 256
          }
        },
        layers: [{
          id: 'simple-tiles',
          type: 'raster',
          source: 'raster-tiles',
          minzoom: 0,
          maxzoom: 22
        }]
      },
      center: [-118.26377, 34.61074],
      zoom: 11
    });
    var map = new mapboxgl.Compare(beforeMap, afterMap, {});

$.ajax({
    url: "api/v1/user/token/",
    type : "GET",
    xhrFields: { withCredentials: true},
    success : function(r) {
      console.log(r);
    },
    error: function(e){
      console.log('Not authenticated');
    }
  });
  </script>

</body>

</html>